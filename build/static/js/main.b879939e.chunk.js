(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=(t(21),t(14)),l=t(2),i=t(3),d=t.n(i),m="/api/persons",f=function(){return d.a.get(m).then(function(e){return e.data})},s=function(e){return d.a.post(m,e).then(function(e){return e.data})},b=function(e,n){return d.a.put("".concat(m,"/").concat(e),n).then(function(e){return e.data})},h=function(e){return d.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},p=function(e){var n=e.message,t=e.color,a={marginBottom:25,border:"2px solid "+t,borderRadius:7,backgroundColor:"rgba(220, 220, 220, 0.3)",padding:10,textAlign:"center",color:t};return null===n?null:r.a.createElement("div",{style:a},n)},v=function(e){var n=e.search,t=e.handleSearch;return r.a.createElement("label",null,"Search:",r.a.createElement("input",{type:"text",value:n,onChange:t}))},E=function(e){var n=e.addPerson,t=e.name,a=e.number,o=e.addName,c=e.addNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement("label",null,"Name:",r.a.createElement("input",{type:"text",value:t,onChange:o,required:!0}))),r.a.createElement("div",null,r.a.createElement("label",null,"Number:",r.a.createElement("input",{type:"text",value:a,onChange:c,required:!0}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},g=function(e){var n=e.person,t=e.removePerson;return r.a.createElement("li",{style:{paddingBottom:10}},n.name,": ",n.number,r.a.createElement("button",{onClick:function(){return t(n.id,n.name)},style:{marginLeft:10}},"Delete"))},w=function(e){var n=e.persons,t=e.removePerson;return r.a.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},n.map(function(e){return r.a.createElement(g,{key:e.id,person:e,removePerson:t})}))},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),d=i[0],m=i[1],g=Object(a.useState)(""),j=Object(l.a)(g,2),y=j[0],O=j[1],k=Object(a.useState)(""),S=Object(l.a)(k,2),P=S[0],C=S[1],N=Object(a.useState)(null),x=Object(l.a)(N,2),A=x[0],L=x[1],B=Object(a.useState)(""),D=Object(l.a)(B,2),q=D[0],J=D[1];Object(a.useEffect)(function(){f().then(function(e){o(e)}).catch(function(e){T("Phonebook unavailable","red")})},[]);var I=""===P?t:t.filter(function(e){var n=e.name.toLowerCase(),t=P.toLowerCase();return n.match(t)}),R=function(e,n){if(window.confirm("".concat(e.name," has already been added to phonebook, replace the old number with a new one?"))){var a=e.id,r=Object(u.a)({},e,{number:n});b(a,r).then(function(e){T("".concat(r.name,"'s number has been updated"),"green"),o(t.map(function(n){return n.id!==a?n:e}))}).catch(function(e){T("".concat(r.name," has already been removed form phonebook"),"red"),o(t.filter(function(e){return e.id!==a}))})}},T=function(e,n){L(e),J(n),setTimeout(function(){L(null),J("")},5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{message:A,color:q}),r.a.createElement(v,{search:P,handleSearch:function(e){return C(e.target.value)}}),r.a.createElement("h2",null,"Add new person"),r.a.createElement(E,{addPerson:function(e){e.preventDefault();var n={name:d,number:y},a=t.some(function(e){return e.name===d&&e.number===y}),r=t.find(function(e){return e.name===d});a?T("".concat(d," has already been added to phonebook"),"green"):r?R(r,y):s(n).then(function(e){T("".concat(n.name," has been added to phonebook"),"green"),o(t.concat(e))}).catch(function(e){T("Attempt failed","red")}),m(""),O(""),C("")},name:d,number:y,addName:function(e){return m(e.target.value)},addNumber:function(e){return O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:I,removePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&h(e).then(function(){T("".concat(n," has been deleted from phonebook"),"green"),o(t.filter(function(n){return n.id!==e}))}).catch(function(e){T("Attempt failed","red")})}}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b879939e.chunk.js.map